{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://github.com/hypercerts-org/hypercerts/hypercert-schema.json",
  "title": "Hypercert Evaluation Schema",
  "description": "Schema for evaluating Hypercerts accross different sources and evaluation types",
  "type": "object",
  "properties": {
    "creator": {
      "type": "string"
    },
    "evaluationData": {
      "$ref": "#/definitions/EvaluationData"
    },
    "evaluationSource": {
      "$ref": "#/definitions/EvaluationSource"
    }
  },
  "required": ["creator", "evaluationData", "evaluationSource"],
  "definitions": {
    "EvaluationData": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["duplicate"]
        },
        "evaluation": {
          "$ref": "#/definitions/DuplicateEvaluation"
        },
        "explanation": {
          "$ref": "#/definitions/Explanation"
        }
      },
      "required": ["type", "evaluation", "explanation"]
    },
    "DuplicateEvaluation": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "duplicate"
        },
        "duplicateHypercerts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Hypercert"
          }
        },
        "realHypercert": {
          "$ref": "#/definitions/Hypercert"
        }
      },
      "required": ["type", "duplicateHypercerts", "realHypercert"]
    },
    "EvaluationSource": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/EASEvaluation"
        },
        {
          "$ref": "#/definitions/IPFSEvaluation"
        }
      ]
    },
    "EASEvaluation": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "EAS"
        },
        "chainID": {
          "type": "string",
          "pattern": "^0x[0-9a-fA-F]{1,}$"
        },
        "contract": {
          "type": "string",
          "pattern": "^0x[0-9a-fA-F]{40}$"
        },
        "uid": {
          "type": "string"
        }
      },
      "required": ["type", "chainID", "contract", "uid"]
    },
    "IPFSEvaluation": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "IPFS"
        },
        "cid": {
          "type": "string"
        }
      },
      "required": ["type", "cid"]
    },
    "Hypercert": {
      "type": "object",
      "properties": {
        "chainID": {
          "type": "string",
          "pattern": "^0x[0-9a-fA-F]{1,}$"
        },
        "contract": {
          "type": "string",
          "pattern": "^0x[0-9a-fA-F]{40}$"
        },
        "claimID": {
          "type": "string"
        }
      },
      "required": ["chainID", "contract", "claimID"]
    },
    "Explanation": {
      "type": "object",
      "properties": {
        "reason": {
          "type": "string"
        }
      },
      "additionalProperties": true
    }
  }
}
